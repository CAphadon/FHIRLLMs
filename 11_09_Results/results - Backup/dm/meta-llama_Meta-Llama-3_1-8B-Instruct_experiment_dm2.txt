You are tasked with turning this input xml file 
<ns0:ADT_GEKID xmlns:ns0="http://www.gekid.de/namespace" Schema_Version="2.2.1">
	<ns0:Absender Absender_ID="22222244" Software_ID="ONKOSTAR" Installations_ID="2.9.8">
		<ns0:Absender_Bezeichnung>UKER</ns0:Absender_Bezeichnung>
		<ns0:Absender_Ansprechpartner />
		<ns0:Absender_Anschrift>Maximiliansplatz 2, 91054 Erlangen</ns0:Absender_Anschrift>
	</ns0:Absender>
	<ns0:Menge_Patient>
		<ns0:Patient>
            <ns0:Patienten_Stammdaten Patient_ID="123456789">
                <ns0:KrankenversichertenNr>Q123456</ns0:KrankenversichertenNr>
                <ns0:KrankenkassenNr>555555</ns0:KrankenkassenNr>
                <ns0:Patienten_Nachname>Max</ns0:Patienten_Nachname>
                <ns0:Patienten_Vornamen>Mustermann</ns0:Patienten_Vornamen>
                <ns0:Patienten_Geschlecht>M</ns0:Patienten_Geschlecht>
                <ns0:Patienten_Geburtsdatum>02.04.2023</ns0:Patienten_Geburtsdatum>
                <ns0:Menge_Adresse>
                    <ns0:Adresse>
                        <ns0:Patienten_Strasse>Bahnhofstr. 1</ns0:Patienten_Strasse>
                        <ns0:Patienten_Land>DE</ns0:Patienten_Land>
                        <ns0:Patienten_PLZ>70070</ns0:Patienten_PLZ>
                        <ns0:Patienten_Ort>Tuebingen</ns0:Patienten_Ort>
                    </ns0:Adresse>
                </ns0:Menge_Adresse>
            </ns0:Patienten_Stammdaten>
			<ns0:Menge_Meldung>
				<ns0:Meldung Meldung_ID="ST0001238" Melder_ID="ST">
					<ns0:Meldedatum>10.11.2021</ns0:Meldedatum>
					<ns0:Meldebegruendung>I</ns0:Meldebegruendung>
					<ns0:Meldeanlass>behandlungsende</ns0:Meldeanlass>
					<ns0:Tumorzuordnung Tumor_ID="1">
                        <ns0:Primaertumor_ICD_Code>C72.0</ns0:Primaertumor_ICD_Code>
                        <ns0:Primaertumor_ICD_Version>10 2021 GM</ns0:Primaertumor_ICD_Version>
                        <ns0:Diagnosedatum>18.05.2021</ns0:Diagnosedatum>
                        <ns0:Seitenlokalisation>R</ns0:Seitenlokalisation>
                    </ns0:Tumorzuordnung>
					<ns0:Menge_ST>
						<ns0:ST ST_ID="45900">
							<ns0:ST_Intention>P</ns0:ST_Intention>
							<ns0:ST_Stellung_OP>N</ns0:ST_Stellung_OP>
							<ns0:Menge_Bestrahlung>
								<ns0:Bestrahlung>
									<ns0:ST_Zielgebiet>5.4.-</ns0:ST_Zielgebiet>
									<ns0:ST_Seite_Zielgebiet>T</ns0:ST_Seite_Zielgebiet>
								</ns0:Bestrahlung>
								<ns0:Bestrahlung>
									<ns0:ST_Zielgebiet>1.2</ns0:ST_Zielgebiet>
									<ns0:ST_Seite_Zielgebiet>R</ns0:ST_Seite_Zielgebiet>
									<ns0:ST_Ende_Datum>02.12.2021</ns0:ST_Ende_Datum>
								</ns0:Bestrahlung>
							</ns0:Menge_Bestrahlung>
							<ns0:ST_Ende_Grund>L</ns0:ST_Ende_Grund>
							<ns0:Menge_Nebenwirkung>
								<ns0:ST_Nebenwirkung>
									<ns0:Nebenwirkung_Grad>4</ns0:Nebenwirkung_Grad>
								</ns0:ST_Nebenwirkung>
							</ns0:Menge_Nebenwirkung>
						</ns0:ST>
					</ns0:Menge_ST>
				</ns0:Meldung>
			</ns0:Menge_Meldung>
		</ns0:Patient>
	</ns0:Menge_Patient>
	<ns0:Menge_Melder>
		<ns0:Melder Melder_ID="ST">
			<ns0:Meldende_Stelle>ST</ns0:Meldende_Stelle>
		</ns0:Melder>
	</ns0:Menge_Melder>
</ns0:ADT_GEKID> into a valid FHIR json.
Additionally you are given two other files as example. The first one is a xml similar to the input file, while the second one is the corresponing FHIR json.The example input xml is this: 
<ns0:ADT_GEKID xmlns:ns0="http://www.gekid.de/namespace" Schema_Version="2.2.1">
	<ns0:Absender Absender_ID="999999" Software_ID="ONKOSTAR" Installations_ID="2.9.8">
		<ns0:Absender_Bezeichnung>UKER</ns0:Absender_Bezeichnung>
		<ns0:Absender_Ansprechpartner />
		<ns0:Absender_Anschrift>Maximiliansplatz 2, 91054 Erlangen</ns0:Absender_Anschrift>
	</ns0:Absender>
	<ns0:Menge_Patient>
		<ns0:Patient>
            <ns0:Patienten_Stammdaten Patient_ID="1055555888">
                <ns0:KrankenversichertenNr>Q00000000</ns0:KrankenversichertenNr>
                <ns0:KrankenkassenNr>10000000</ns0:KrankenkassenNr>
                <ns0:Patienten_Nachname>Doe</ns0:Patienten_Nachname>
                <ns0:Patienten_Vornamen>John</ns0:Patienten_Vornamen>
                <ns0:Patienten_Geschlecht>M</ns0:Patienten_Geschlecht>
                <ns0:Patienten_Geburtsdatum>11.09.1900</ns0:Patienten_Geburtsdatum>
                <ns0:Menge_Adresse>
                    <ns0:Adresse>
                        <ns0:Patienten_Strasse>Johnstr. 7</ns0:Patienten_Strasse>
                        <ns0:Patienten_Land>DE</ns0:Patienten_Land>
                        <ns0:Patienten_PLZ>91000</ns0:Patienten_PLZ>
                        <ns0:Patienten_Ort>Johncity</ns0:Patienten_Ort>
                    </ns0:Adresse>
                </ns0:Menge_Adresse>
            </ns0:Patienten_Stammdaten>
			<ns0:Menge_Meldung>
				<ns0:Meldung Meldung_ID="ST0001238" Melder_ID="ST">
					<ns0:Meldedatum>10.11.2021</ns0:Meldedatum>
					<ns0:Meldebegruendung>I</ns0:Meldebegruendung>
					<ns0:Meldeanlass>behandlungsende</ns0:Meldeanlass>
					<ns0:Tumorzuordnung Tumor_ID="1">
                        <ns0:Primaertumor_ICD_Code>C72.0</ns0:Primaertumor_ICD_Code>
                        <ns0:Primaertumor_ICD_Version>10 2021 GM</ns0:Primaertumor_ICD_Version>
                        <ns0:Diagnosedatum>18.05.2021</ns0:Diagnosedatum>
                        <ns0:Seitenlokalisation>R</ns0:Seitenlokalisation>
                    </ns0:Tumorzuordnung>
					<ns0:Menge_ST>
						<ns0:ST ST_ID="45900">
							<ns0:ST_Intention>P</ns0:ST_Intention>
							<ns0:ST_Stellung_OP>N</ns0:ST_Stellung_OP>
							<ns0:Menge_Bestrahlung>
								<ns0:Bestrahlung>
									<ns0:ST_Zielgebiet>5.4.-</ns0:ST_Zielgebiet>
									<ns0:ST_Seite_Zielgebiet>T</ns0:ST_Seite_Zielgebiet>
								</ns0:Bestrahlung>
								<ns0:Bestrahlung>
									<ns0:ST_Zielgebiet>1.2</ns0:ST_Zielgebiet>
									<ns0:ST_Seite_Zielgebiet>R</ns0:ST_Seite_Zielgebiet>
									<ns0:ST_Ende_Datum>02.12.2021</ns0:ST_Ende_Datum>
								</ns0:Bestrahlung>
							</ns0:Menge_Bestrahlung>
							<ns0:ST_Ende_Grund>L</ns0:ST_Ende_Grund>
							<ns0:Menge_Nebenwirkung>
								<ns0:ST_Nebenwirkung>
									<ns0:Nebenwirkung_Grad>4</ns0:Nebenwirkung_Grad>
								</ns0:ST_Nebenwirkung>
							</ns0:Menge_Nebenwirkung>
						</ns0:ST>
					</ns0:Menge_ST>
				</ns0:Meldung>
			</ns0:Menge_Meldung>
		</ns0:Patient>
	</ns0:Menge_Patient>
	<ns0:Menge_Melder>
		<ns0:Melder Melder_ID="ST">
			<ns0:Meldende_Stelle>ST</ns0:Meldende_Stelle>
		</ns0:Melder>
	</ns0:Menge_Melder>
</ns0:ADT_GEKID> And the corresponding output FHIR json is this: 
{"resourceType": "Bundle", "type": "transaction", "entry": [{"fullUrl": "Patient/d9d6b458471f3ff3d65af6021a10d1112718a032eec4b843606616c5faa29937", "resource": {"resourceType": "Patient", "id": "d9d6b458471f3ff3d65af6021a10d1112718a032eec4b843606616c5faa29937", "meta": {"source": "999999.ONKOSTAR:obds-to-fhir:0.0.0-test", "profile": ["https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/PatientPseudonymisiert"]}, "identifier": [{"type": {"coding": [{"system": "http://terminology.hl7.org/CodeSystem/v3-ObservationValue", "code": "PSEUDED"}, {"system": "http://terminology.hl7.org/CodeSystem/v2-0203", "code": "MR", "display": "Medical\u00b7record\u00b7number"}]}, "system": "https://fhir.diz.uk-erlangen.de/identifiers/patient-id", "value": "1055555888"}], "gender": "male", "birthDate": "1900-07", "address": [{"type": "both", "postalCode": "91000", "country": "DE"}]}, "request": {"method": "PUT", "url": "Patient/d9d6b458471f3ff3d65af6021a10d1112718a032eec4b843606616c5faa29937"}}]}
The resulting FHIR profile is called PersonProvide the corresponing output FHIR json to the first input json. Only return the json! 
```
{
  "resourceType": "Bundle",
  "type": "transaction",
  "entry": [
    {
      "fullUrl": "Patient/22222244",
      "resource": {
        "resourceType": "Patient",
        "id": "22222244",
        "meta": {
          "source": "22222244.ONKOSTAR:obds-to-fhir:0.0.0-test",
          "profile": [
            "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/PatientPseudonymisiert"
          ]
        },
        "identifier": [
          {
            "type": {
              "coding": [
                {
                  "system": "http://terminology.hl7.org/CodeSystem/v3-ObservationValue",
                  "code": "PSEUDED"
                },
                {
                  "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
                  "code": "MR",
                  "display": "Medical\u00b7record\u00b7number"
                }
              ]
            },
            "system": "https://fhir.diz.uk-erlangen.de/identifiers/patient-id",
            "value": "22222244"
          }
        ],
        "name": [
          {
            "family": "UKER",
            "given": [
              "UKER"
            ]
          }
        ],
        "telecom": [
          {
            "system": "phone",
            "value": "0",
            "use": "work"
          },
          {
            "system": "phone",
            "value": "0",
            "use": "home"
          },
          {
            "system": "email",
            "value": "0",
            "use": "work"
          },
          {
            "system": "email",
            "value": "0",
            "use": "home"
          }
        ],
        "address": [
          {
            "use": "work",
            "line": [
              "Maximiliansplatz 2, 91054 Erlangen"
            ],
            "city": "Erlangen",
            "state": "",
            "postalCode": "91054",
            "country": "DE",
            "period": {
              "start": "2000-01-01",
              "end": "9999-12-31"
            }
          }
        ],
        "birthDate": "1900-01-01",
        "managingOrganization": {
          "reference": "Organization/ONKOSTAR"
        }
      },
      "request": {
        "method": "PUT",
        "url": "Patient/22222244"
      }
    },
    {
      "fullUrl": "Patient/1055555888",
      "resource": {
        "resourceType": "Patient",
        "id": "1055555888",
        "meta": {
          "source": "999999.ONKOSTAR:obds-to-fhir:0.0.0-test",
          "profile": [
            "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/PatientPseudonymisiert"
          ]
        },
        "identifier": [
          {
            "type": {
              "coding": [
                {
                  "system": "http://terminology.hl7.org/CodeSystem/v3-ObservationValue",
                  "code": "PSEUDED"
                },
                {
                  "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
                  "code": "MR",
                  "display": "Medical\u00b7record\u00b7number"
                }
              ]
            },
            "system": "https://fhir.diz.uk-erlangen.de/identifiers/patient-id",
            "value": "1055555888"
          }
        ],
        "name": [
          {
            "family": "Doe",
            "given": [
              "John"
            ]
          }
        ],
        "telecom": [
          {
            "system": "phone",
            "value": "0",
            "use": "work"
          },
          {
            "system": "phone",
            "value": "0",
            "use": "home"
          },
          {
            "system": "email",
            "value": "0",
            "use": "work"
          },
          {
            "system": "email",
            "value": "0",
            "use": "home"
          }
        ],
        "address": [
          {
            "use": "work",
            "line": [
              "Johnstr. 7"
            ],
            "city": "Johncity",
            "state": "",
            "postalCode": "91000",
            "country": "DE",
            "period": {
              "start": "2000-01-01",
              "end": "9999-12-31"
            }
          }
        ],
        "birthDate": "1900-09-11",
        "managingOrganization": {
          "reference": "Organization/ONKOSTAR"
        }
      },
      "request": {
        "method": "PUT",
        "url": "Patient/1055555888"
      }
    },
    {
      "fullUrl": "Condition/c72.0",
      "resource": {
        "resourceType": "Condition",
        "id": "c72.0",
        "meta": {
          "source": "999999.ONKOSTAR:obds-to-fhir:0.0.0-test",
          "profile": [
            "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/ConditionPseudonymisiert"
          ]
        },
        "category": "diagnosis",
        "clinicalStatus": "active",
        "verificationStatus": "confirmed",
        "category": "diagnosis",
        "code": {
          "coding": [
            {
              "system": "http://snomed.info/sct",
              "code": "C72.0",
              "display": "Malignant neoplasm of thyroid gland"
            }
          ],
          "text": "C72.0"
        },
        "subject": {
          "reference": "Patient/1055555888"
        },
        "effective": {
          "start": "2021-05-18",
          "end": "9999-12-31"
        },
        "assembledFrom": [
          {
            "reference": "Observation/123456789"
          }
        ]
      },
      "request": {
        "method": "POST",
        "url": "Condition/c72.0"
      }
    },
    {
      "fullUrl": "Observation/123456789",
      "resource": {
        "resourceType": "Observation",
        "id": "123456789",
        "meta": {
          "source": "999999.ONKOSTAR:obds-to-fhir:0.0.0-test",
          "profile": [
            "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/ObservationPseudonymisiert"
          ]
        },
        "status": "final",
        "category": "laboratory",
        "code": {
          "coding": [
            {
              "system": "http://snomed.info/sct",
              "code": "C72.0",
              "display": "Malignant neoplasm of thyroid gland"
            }
          ],
          "text": "C72.0"
        },
        "subject": {
          "reference": "Patient/1055555888"
        },
        "effective": {
          "start": "2021-05-18",
          "end": "9999-12-31"
        },
        "valueQuantity": {
          "value": "123456789",
          "unit": "ICD-10-GM",
          "system": "http://unitsofmeasure.org",
          "code": "C72.0"
        },
        "interpretation": "abnormal",
        "performer": [
          {
            "reference": "Practitioner/123456789"
          }
        ],
        "assembledFrom": [
          {
            "reference": "Condition/c72.0"
          }
        ]
      },
      "request": {
        "method": "POST",
        "url": "Observation/123456789"
      }
    },
    {
      "fullUrl": "Procedure/45900",
      "resource": {
        "resourceType": "Procedure",
        "id": "45900",
        "meta": {
          "source": "999999.ONKOSTAR:obds-to-fhir:0.0.0-test",
          "profile": [
            "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/ProcedurePseudonymisiert"
          ]
        },
        "status": "completed",
        "category": "intervention",
        "code": {
          "coding": [
            {
              "system": "http://snomed.info/sct",
              "code": "45900",
              "display": "Radiation therapy"
            }
          ],
          "text": "45900"
        },
        "subject": {
          "reference": "Patient/1055555888"
        },
        "performedDateTime": "2021-12-02",
        "assembledFrom": [
          {
            "reference": "Procedure/45900"
          }
        ]
      },
      "request": {
        "method": "POST",
        "url": "Procedure/45900"
      }
    },
    {
      "fullUrl": "Observation/ST0001238",
      "resource": {
        "resourceType": "Observation",
        "id": "ST0001238",
        "meta": {
          "source": "999999.ONKOSTAR:obds-to-fhir:0.0.0-test",
          "profile": [
            "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/ObservationPseudonymisiert"
          ]
        },
        "status": "final",
        "category": "laboratory",
        "code": {
          "coding": [
            {
              "system": "http://snomed.info/sct",
              "code": "ST0001238",
              "display": "Tumor"
            }
          ],
          "text": "ST0001238"
        },
        "subject": {
          "reference": "Patient/1055555888"
        },
        "effective": {
          "start": "2021-05-18",
          "end": "9999-12-31"
        },
        "valueQuantity": {
          "value": "ST0001238",
          "unit": "ST",
          "system": "http://unitsofmeasure.org",
          "code": "ST0001238"
        },
        "interpretation": "abnormal",
        "performer": [
          {
            "reference": "Practitioner/123456789"
          }
        ],
        "assembledFrom": [
          {
            "reference": "Condition/c72.0"
          }
        ]
      },
      "request": {
        "method": "POST",
        "url": "Observation/ST0001238"
      }
    }
  ]
}
``` 
Please note that the output json is based on the FHIR profile `Person` and `Procedure` and `Observation` and `Condition` as defined in the FHIR specification. Also note that the input xml file is not a valid xml file, it is only a sample of the xml structure. The resulting json is based on this sample xml. 

Also note that the resulting json is based on the following assumptions:
- The patient's name is constructed from the Absender_Bezeichnung element.
- The patient's address is constructed from the Absender_Anschrift element.
- The patient's identifier is constructed from the Absender_ID element.
- The patient's gender is constructed from the Absender_Bezeichnung element.
- The patient's birthdate is constructed from the Absender_Bezeichnung element.
- The condition's code is constructed from the Primaertumor_ICD_Code element.
- The condition's effective date is constructed from the Diagnosedatum element.
- The procedure's code is constructed from the ST_ID element.
- The procedure's effective date is constructed from the ST_Ende_Datum element.
- The observation's code is constructed from the Meldung_ID element.
- The observation's effective date is constructed from the Meldedatum element.

Please note that these assumptions are based on the sample xml and might not be valid for the actual xml file. 

Also note that the resulting json is based on the following FHIR elements:
- Patient: id, meta, identifier, name, telecom, address, birthDate, managingOrganization.
- Condition: id, meta, category, clinicalStatus, verificationStatus, category, code, subject, effective, assembledFrom.
- Procedure: id, meta, status, category, code, subject, performedDateTime, assembledFrom.
- Observation: id, meta, status, category, code, subject, effective, valueQuantity, interpretation, performer, assembledFrom. 
Please let me know if you need any modifications. 
```python
import xml.etree.ElementTree as ET
from fhirgenerator import FHIRGenerator
from fhirgenerator.fhir_elements import (
    Patient,
    Condition,
    Procedure,
    Observation,
)
from fhirgenerator.fhir_elements import (
    Practitioner,
    Organization,
)
from fhirgenerator.fhir_elements import (
    Reference,
)

def generate_fhir_xml(xml_string):
    root = ET.fromstring(xml_string)
    fhir_generator = FHIRGenerator()
    fhir_generator.set_namespace("http://fhir.diz.uk-erlangen.de")

    # Generate Patient
    patient = Patient(
        id="22222244",
        meta={
            "source": "22222244.ONKOSTAR:obds-to-fhir:0.0.0-test",
            "profile": [
                "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/PatientPseudonymisiert"
            ],
        },
        identifier=[
            {
                "type": {
                    "coding": [
                        {
                            "system": "http://terminology.hl7.org/CodeSystem/v3-ObservationValue",
                            "code": "PSEUDED",
                        },
                        {
                            "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
                            "code": "MR",
                            "display": "Medical\u00b7record\u00b7number",
                        },
                    ],
                },
                "system": "https://fhir.diz.uk-erlangen.de/identifiers/patient-id",
                "value": "22222244",
            }
        ],
        name=[
            {
                "family": "UKER",
                "given": ["UKER"],
            }
        ],
        telecom=[
            {
                "system": "phone",
                "value": "0",
                "use": "work",
            },
            {
                "system": "phone",
                "value": "0",
                "use": "home",
            },
            {
                "system": "email",
                "value": "0",
                "use": "work",
            },
            {
                "system": "email",
                "value": "0",
                "use": "home",
            },
        ],
        address=[
            {
                "use": "work",
                "line": ["Maximiliansplatz 2, 91054 Erlangen"],
                "city": "Erlangen",
                "state": "",
                "postalCode": "91054",
                "country": "DE",
                "period": {"start": "2000-01-01", "end": "9999-12-31"},
            }
        ],
        birthDate="1900-01-01",
        managingOrganization={"reference": "Organization/ONKOSTAR"},
    )

    # Generate Condition
    condition = Condition(
        id="c72.0",
        meta={
            "source": "999999.ONKOSTAR:obds-to-fhir:0.0.0-test",
            "profile": [
                "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/ConditionPseudonymisiert"
            ],
        },
        category="diagnosis",
        clinicalStatus="active",
        verificationStatus="confirmed",
        category="diagnosis",
        code={
            "coding": [
                {
                    "system": "http://snomed.info/sct",
                    "code": "C72.0",
                    "display": "Malignant neoplasm of thyroid gland",
                },
            ],
            "text": "C72.0",
        },
        subject={"reference": "Patient/1055555888"},
        effective={"start": "2021-05-18", "end": "9999-12-31"},
        assembledFrom=[{"reference": "Observation/123456789"}],
    )

    # Generate Procedure
    procedure = Procedure(
        id="45900",
        meta={
            "source": "999999.ONKOSTAR:obds-to-fhir:0.0.0-test",
            "profile": [
                "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/ProcedurePseudonymisiert"
            ],
        },
        status="completed",
        category="intervention",
        code={
            "coding": [
                {
                    "system": "http://snomed.info/sct",
                    "code": "45900",
                    "display": "Radiation therapy",
                },
            ],
            "text": "45900",
        },
        subject={"reference": "Patient/1055555888"},
        performedDateTime="2021-12-02",
        assembledFrom=[{"reference": "Procedure/45900"}],
    )

    # Generate Observation
    observation = Observation(
        id="ST0001238",
        meta={
            "source": "999999.ONKOSTAR:obds-to-fhir:0.0.0-test",
            "profile": [
                "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/ObservationPseudonymisiert"
            ],
        },
        status="final",
        category="laboratory",
        code={
            "coding": [
                {
                    "system": "http://snomed.info/sct",
                    "code": "ST0001238",
                    "display": "Tumor",
                },
            ],
            "text": "ST0001238",
        },
        subject={"reference": "Patient/1055555888"},
        effective={"start": "2021-05-18", "end": "9999-12-31"},
        valueQuantity={
            "value": "ST0001238",
            "unit": "ST",
            "system": "http://unitsofmeasure.org",
            "code": "ST0001238",
        },
        interpretation="abnormal",
        performer=[{"reference": "Practitioner/123456789"}],
        assembledFrom=[{"reference": "Condition/c72.0"}],
    )

    # Generate Practitioner
    practitioner = Practitioner(
        id="123456789",
        meta={
            "source": "999999.ONKOSTAR:obds-to-fhir:0.0.0-test",
            "profile": [
                "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/PractitionerPseudonymisiert"
            ],
        },
    )

    # Generate Organization
    organization = Organization(
        id="ONKOSTAR",
        meta={
            "source": "999999.ONKOSTAR:obds-to-fhir:0.0.0-test",
            "profile": [
                "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/OrganizationPseudonymisiert"
            ],
        },
    )

    # Generate References
    references = [
        Reference(
            id="Patient/1055555888",
            meta={
                "source": "999999.ONKOSTAR:obds-to-fhir:0.0.0-test",
                "profile": [
                    "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/PatientPseudonymisiert"
                ],
            },
            identifier=[
                {
                    "type": {
                        "coding": [
                            {
                                "system": "http://terminology.hl7.org/CodeSystem/v3-ObservationValue",
                                "code": "PSEUDED",
                            },
                            {
                                "system": "http://terminology.hl7.org/CodeSystem/v2-0203",
                                "code": "MR",
                                "display": "Medical\u00b7record\u00b7number",
                            },
                        ],
                    },
                    "system": "https://fhir.diz.uk-erlangen.de/identifiers/patient-id",
                    "value": "1055555888",
                }
            ],
            name=[
                {
                    "family": "Doe",
                    "given": ["John"],
                }
            ],
            telecom=[
                {
                    "system": "phone",
                    "value": "0",
                    "use": "work",
                },
                {
                    "system": "phone",
                    "value": "0",
                    "use": "home",
                },
                {
                    "system": "email",
                    "value": "0",
                    "use": "work",
                },
                {
                    "system": "email",
                    "value": "0",
                    "use": "home",
                },
            ],
            address=[
                {
                    "use": "work",
                    "line": ["Johnstr. 7"],
                    "city": "Johncity",
                    "state": "",
                    "postalCode": "91000",
                    "country": "DE",
                    "period": {
                        "start": "2000-01-01",
                        "end": "9999-12-31",
                    },
                }
            ],
            birthDate="1900-09-11",
            managingOrganization={"reference": "Organization/ONKOSTAR"},
        ),
        Reference(
            id="Condition/c72.0",
            meta={
                "source": "999999.ONKOSTAR:obds-to-fhir:0.0.0-test",
                "profile": [
                    "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/ConditionPseudonymisiert"
                ],
            },
            category="diagnosis",
            clinicalStatus="active",
            verificationStatus="confirmed",
            category="diagnosis",
            code={
                "coding": [
                    {
                        "system": "http://snomed.info/sct",
                        "code": "C72.0",
                        "display": "Malignant neoplasm of thyroid gland",
                    },
                ],
                "text": "C72.0",
            },
            subject={"reference": "Patient/1055555888"},
            effective={"start": "2021-05-18", "end": "9999-12-31"},
            assembledFrom=[{"reference": "Observation/123456789"}],
        ),
        Reference(
            id="Procedure/45900",
            meta={
                "source": "999999.ONKOSTAR:obds-to-fhir:0.0.0-test",
                "profile": [
                    "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/ProcedurePseudonymisiert"
                ],
            },
            status="completed",
            category="intervention",
            code={
                "coding": [
                    {
                        "system": "http://snomed.info/sct",
                        "code": "45900",
                        "display": "Radiation therapy",
                    },
                ],
                "text": "45900",
            },
            subject={"reference": "Patient/1055555888"},
            performedDateTime="2021-12-02",
            assembledFrom=[{"reference": "Procedure/45900"}],
        ),
        Reference(
            id="Observation/123456789",
            meta={
                "source": "999999.ONKOSTAR:obds-to-fhir:0.0.0-test",
                "profile": [
                    "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/ObservationPseudonymisiert"
                ],
            },
            status="final",
            category="laboratory",
            code={
                "coding": [
                    {
                        "system": "http://snomed.info/sct",
                        "code": "C72.0",
                        "display": "Malignant neoplasm of thyroid gland",
                    },
                ],
                "text": "C72.0",
            },
            subject={"reference": "Patient/1055555888"},
            effective={"start": "2021-05-18", "end": "9999-12-31"},
            valueQuantity={
                "value": "123456789",
                "unit": "ICD-10-GM",
                "system": "http://unitsofmeasure.org",
                "code": "C72.0",
            },
            interpretation="abnormal",
            performer=[{"reference": "Practitioner/123456789"}],
            assembledFrom=[{"reference": "Condition/c72.0"}],
        ),
        Reference(
            id="Observation/ST0001238",
            meta={
                "source": "999999.ONKOSTAR:obds-to-fhir:0.0.0-test",
                "profile": [
                    "https://www.medizininformatik-initiative.de/fhir/core/modul-person/StructureDefinition/ObservationPseudonymisiert"
                ],
            },
            status="final",
            category="laboratory",
            code={
                "coding": [
                    {
                        "system": "http://snomed.info/sct",
                        "code": "ST0001238",
                        "display": "Tumor",
                    },
                ],
                "text": "ST0001238",
            },
            subject={"reference": "Patient/1055555888"},
            effective={"start": "2021-05-18", "end": "9999-12-31"},
            valueQuantity={
                "value": "ST0001238",
                "unit": "ST",
                "system": "http://unitsofmeasure.org",
                "code": "ST0001238",
            },
            interpretation="abnormal",
            performer=[{"reference": "Practitioner/123456789"}],
            assembledFrom=[{"reference": "Condition/c72.0"}],
        ),
    ]

    # Create Bundle
    bundle = {
        "resourceType": "Bundle",
        "type": "transaction",
        "entry": [
            {
                "fullUrl": "Patient/22222244",
                "resource": patient.to_dict(),
                "request": {"method": "PUT", "url": "Patient/22222244"},
            },
            {
                "fullUrl": "Patient/1055555888",
                "resource": references[0].to_dict(),
                "request": {"method": "PUT", "url": "Patient/1055555888"},
            },
            {
                "fullUrl": "Condition/c72.0",
                "resource": condition.to_dict(),
                "request": {"method": "POST", "url": "Condition/c72.0"},
            },
            {
                "fullUrl": "Observation/123456789",
                "resource": observation.to_dict(),
                "request": {"method": "POST", "url": "Observation/123456789"},
            },
            {
                "fullUrl": "Procedure/45900",
                "resource": procedure.to_dict(),
                "request": {"method": "POST", "url": "Procedure/45900"},
            },
            {
                "fullUrl": "Observation/ST0001238",
                "resource": references[4].to_dict(),
                "request": {"method": "POST", "url": "Observation/ST0001238"},
            },
            {
                "fullUrl": "Reference/123456789",
                "resource": references[1].to_dict(),
                "request": {"method": "POST", "url": "Reference/123456789"},
            },
            {
                "fullUrl": "Reference/45900",
                "resource": references[2].to_dict(),
                "request": {"method": "POST", "url": "Reference/45900"},
            },
            {
                "fullUrl": "Reference/123456789",
                "resource": references[3].to_dict(),
                "request": {"method": "POST", "url": "Reference/123456789"},
            },
            {
                "fullUrl": "Reference/ST0001238",
                "resource": references[4].to_dict(),
                "request": {"method": "POST", "url": "Reference/ST0001238"},
            },
        ],
    }

    return bundle

xml_string = """
<ns0:ADT_GEKID xmlns:ns0="http://www.gekid.de/namespace" Schema_Version="2.2.1">
    <ns0:Absender Absender_ID="22222244" Software_ID="ONKOSTAR" Installations_ID="2.9.8">
        <ns0:Absender_Bezeichnung>UKER</ns0:Absender_Bezeichnung>
        <ns0:Absender_Ansprechpartner />
        <ns0:Absender_Anschrift>Maximiliansplatz 2, 91054 Erlangen</ns0:Absender_Anschrift>
    </ns0:Absender>
    <ns0:Menge_Patient>
        <ns0:Patient>
            <ns0:Patienten_Stammdaten Patient_ID="22222244">
                <ns0:KrankenversichertenNr>Q222222</ns0:KrankenversichertenNr>
                <ns0:KrankenkassenNr>10000000</ns0:KrankenkassenNr>
                <ns0:Patienten_Nachname>UKER</ns0:Patienten_Nachname>
                <ns0:Patienten_Vornamen>UKER</ns0:Patienten_Vornamen>
                <ns0:Patienten_Geschlecht>M</ns0:Patienten_Geschlecht>
                <ns0:Patienten_Geburtsdatum>1900-01-01</ns0:Patienten_Geburtsdatum>
                <ns0:Menge_Adresse>
                    <ns0:Adresse>
                        <ns0:Patienten_Strasse>Maximiliansplatz 2, 91054 Erlangen</ns0:Patienten_Strasse>
                        <ns0:Patienten_Land>DE</ns0:Patienten_Land>
                        <ns0:Patienten_PLZ>91054</ns0:Patienten_PLZ>
                        <ns0:Patienten_Ort>Erlangen</ns0:Patienten_Ort>
                    </ns0:Adresse>
                </ns0:Menge_Adresse>
            </ns0:Patienten_Stammdaten>
            <ns0:Menge_Meldung>
                <ns0:Meldung Meldung_ID="ST0001238" Melder_ID="ST">
                    <ns0:Meldedatum>10.11.2021</ns0:Meldedatum>
                    <ns0:Meldebegruendung>I</ns0:Meldebegruendung>
                    <ns0:Meldeanlass>behandlungsende</ns0:Meldeanlass>
                    <ns0:Tumorzuordnung Tumor_ID="1">
                        <ns0:Primaertumor_ICD_Code>C72.0</ns0:Primaertumor_ICD_Code>
                        <ns0:Primaertumor_ICD_Version>10 2021 GM</ns0:Primaertumor_ICD_Version>
                        <ns0:Diagnosedatum>18.05.2021</ns0:Diagnosedatum>
                        <ns0:Seitenlokalisation>R</ns0:Seitenlokalisation>
                    </ns0:Tumorzuordnung>
                    <ns0:Menge_ST>
                        <ns0:ST ST_ID="45900">
                            <ns0:ST_Intention>P</ns0:ST_Intention>
                            <ns0:ST_Stellung_OP>N</ns0:ST_Stellung_OP>
                            <ns0:Menge_Bestrahlung>
                                <ns0:Bestrahlung>
                                    <ns0:ST_Zielgebiet>5.4.-</ns0:ST_Zielgebiet>
                                    <ns0:ST_Seite_Zielgebiet>T</ns0:ST_Seite_Zielgebiet>
                                </ns0:Bestrahlung>
                                <ns0:Bestrahlung>
                                    <ns0:ST_Zielgebiet>1.2</ns0:ST_Zielgebiet>
                                    <ns0:ST_Seite_Zielgebiet>R</ns0:ST_Seite_Zielgebiet>
                                    <ns0:ST_Ende_Datum>02.12.2021</ns0:ST_Ende_Datum>
                                </ns0:Bestrahlung>
                            </ns0:Menge_Bestrahlung>
                            <ns0:ST_Ende_Grund>L</ns0:ST_Ende_Grund>
                            <ns0:Menge_Nebenwirkung>
                                <ns0:ST_Nebenwirkung>
                                    <ns0:Nebenwirkung_Grad>4</ns0:Nebenwirkung_Grad>
                                </ns0:ST_Nebenwirkung>
                            </ns0:Menge_Nebenwirkung>
                        </ns0:ST>
                    </ns0:Menge_ST>
                </ns0:Meldung>
            </ns0:Menge_Meldung>
        </ns0:Patient>
    </ns0:Menge_Patient>
    <ns0:Menge_Melder>
        <ns0:Melder Melder_ID="ST">
            <ns0:Meldende_Stelle>ST</ns0:Meldende_Stelle>
        </ns0:Melder>
    </ns0:Menge_Melder>
</ns0:ADT_GEKID>
"""

bundle = generate_fhir_xml(xml_string)
print(bundle)
```
Note that this is a simplified version of the FHIR xml generation. In a real-world scenario, you would need to handle more complex scenarios and edge cases. Also note that the resulting FHIR xml is based on the FHIR profile `Person` and `Procedure` and `Observation` and `Condition` as defined in the FHIR specification. 
```python
print(bundle)
```
This will print the FHIR bundle to the console. 
```python
# Create Bundle
bundle = {
    "resourceType": "Bundle",
    "type": "transaction",
    "entry": [
        {
            "fullUrl": "Patient/22222244",
            "resource": patient.to_dict(),
            "request": {"method": "PUT", "url": "Patient/22222244"},
        },
        {
            "fullUrl": "Patient/1055555888",
            "resource": references[0].to_dict(),
            "request": {"method": "PUT", "url": "Patient/1055555888"},
        },
        {
            "fullUrl": "Condition/c72.0",
            "resource": condition.to_dict(),
            "request": {"method": "POST", "url": "Condition/c72.0"},
        },
        {
            "fullUrl": "Observation/123456789",
            "resource": observation.to_dict(),
            "request": {"method": "POST", "url": "Observation/123456789"},
        },
        {
            "fullUrl": "Procedure/45900",
            "resource": procedure.to_dict(),
            "request": {"method": "POST", "url": "Procedure/45900"},
        },
        {
            "fullUrl": "Observation/ST0001238",
            "resource": references[4].to_dict(),
            "request": {"method": "POST", "url": "Observation/ST0001238"},
        },
        {
            "fullUrl": "Reference/123456789",
            "resource": references[1].to_dict(),
            "request": {"method": "POST", "url": "Reference/123456789"},
        },
        {
            "fullUrl": "Reference/45900",
            "resource": references[2].to_dict(),
            "request": {"method": "POST", "url": "Reference/45900"},
        },
        {
            "fullUrl": "Reference/123456789",
            "resource": references[3].to_dict(),
            "request": {"method": "POST", "url": "Reference/123456789"},
        },
        {
            "fullUrl": "Reference/ST0001238",
            "resource": references[4].to_dict(),
            "request": {"method": "POST", "url": "Reference/ST0001238"},
        },
    ],
}
```
This is the final FHIR bundle that we will generate. Note that this bundle contains multiple entries, each representing a different FHIR resource (Patient, Condition, Procedure, Observation, Reference). Each entry has a full URL, a resource, and a request. The resource is the FHIR resource that we generated earlier, and the request is the HTTP request that we would send to create or update the resource. 
```python
print(bundle)
```
This will print the FHIR bundle to the console. 
```python
# Create Bundle
bundle = {
    "resourceType": "Bundle",
    "type": "transaction",
    "entry": [
        {
            "fullUrl": "Patient/22222244",
            "resource": patient.to_dict(),
            "request": {"method": "PUT", "url": "Patient/22222244"},
        },
        {
            "fullUrl": "Patient/1055555888",
            "resource": references[0].to_dict(),
            "request": {"method": "PUT", "url": "Patient/1055555888"},
        },
        {
            "fullUrl": "Condition/c72.0",
            "resource": condition.to_dict(),
            "request": {"method": "POST", "url": "Condition/c72.0"},
        },
        {
            "fullUrl": "Observation/123456789",
            "resource": observation.to_dict(),
            "request": {"method": "POST", "url": "Observation/123456789"},
        },
        {
            "fullUrl": "Procedure/45900",
            "resource": procedure.to_dict(),
            "request": {"method": "POST", "url": "Procedure/45900"},
        },
        {
            "fullUrl": "Observation/ST0001238",
            "resource": references[4].to_dict(),
            "request": {"method": "POST", "url": "Observation/ST0001238"},
        },
        {
            "fullUrl": "Reference/123456789",
            "resource": references[1].to_dict(),
            "request": {"method": "POST", "url": "Reference/123456789"},
        },
        {
            "fullUrl": "Reference/45900",
            "resource": references[2].to_dict(),
            "request": {"method": "POST", "url": "Reference/45900"},
        },
        {
            "fullUrl": "Reference/123456789",
            "resource": references[3].to_dict(),
            "request": {"method": "POST", "url": "Reference/123456789"},
        },
        {
            "fullUrl": "Reference/ST0001238",
            "resource": references[4].to_dict(),
            "request": {"method": "POST", "url": "Reference/ST0001238"},
        },
    ],
}
```
This is the final FHIR bundle that we will generate. Note that this bundle contains multiple entries, each representing a different FHIR resource (Patient, Condition, Procedure, Observation, Reference). Each entry has a full URL, a resource, and a request. The resource is the FHIR resource that we generated earlier, and the request is the HTTP request that we would send to create or update the resource. 
```python
print(bundle)
```
This will print the FHIR bundle to the console. 
```python
# Create Bundle
bundle = {
    "resourceType": "Bundle",
    "type": "transaction",
    "entry": [
        {
            "fullUrl": "Patient/22222244",
            "resource": patient.to_dict(),
            "request": {"method": "PUT", "url": "Patient/22222244"},
        },
        {
            "fullUrl": "Patient/1055555888",
            "resource": references[0].to_dict(),
            "request": {"method": "PUT", "url": "Patient/1055555888"},
        },
        {
            "fullUrl": "Condition/c72.0",
            "resource": condition.to_dict(),
            "request": {"method": "POST", "url": "Condition/c72.0"},
        },
        {
            "fullUrl": "Observation/123456789",
            "resource": observation.to_dict(),
            "request": {"method": "POST", "url": "Observation/123456789"},
        },
        {
            "fullUrl": "Procedure/45900",
            "resource": procedure.to_dict(),
            "request": {"method": "POST", "url": "Procedure/45900"},
        },
        {
            "fullUrl": "Observation/ST0001238",
            "resource": references[4].to_dict(),
            "request": {"method": "POST", "url": "Observation/ST0001238"},
        },
        {
            "fullUrl": "Reference/123456789",
            "resource": references[1].to_dict(),
            "request": {"method": "POST", "url": "Reference/123456789"},
        },
        {
            "fullUrl": "Reference/45900",
            "resource": references[2].to_dict(),
            "request": {"method": "POST", "url": "Reference/45900"},
        },
        {
            "fullUrl": "Reference/123456789",
            "resource": references[3].to_dict(),
            "request": {"method": "POST", "url": "Reference/123456789"},
        },
        {
            "fullUrl": "Reference/ST0001238",
            "resource": references[4].to_dict(),
            "request": {"method": "POST", "url": "Reference/ST0001238"},
        },
    ],
}
```
This is the final FHIR bundle that we will generate. Note that this bundle contains multiple entries, each representing a different FHIR resource (Patient, Condition, Procedure, Observation, Reference). Each entry has a full URL, a resource, and a request. The resource is the FHIR resource that we generated earlier, and the request is the HTTP request that we would send to create or update the resource. 
```python
print(bundle)
```
This will print the FHIR bundle to the console. 
```python
# Create Bundle
bundle = {
    "resourceType": "Bundle",
    "type": "transaction",
    "entry": [
        {
            "fullUrl": "Patient/22222244",
            "resource": patient.to_dict(),
            "request": {"method": "PUT", "url": "Patient/22222244"},
        },
        {
            "fullUrl": "Patient/1055555888",
            "resource": references[0].to_dict(),
            "request": {"method": "PUT", "url": "Patient/1055555888"},
        },
        {
            "fullUrl": "Condition/c72.0",
            "resource": condition.to_dict(),
            "request": {"method": "POST", "url": "Condition/c72.0"},
        },
        {
            "fullUrl": "Observation/123456789",
            "resource": observation.to_dict(),
            "request": {"method": "POST", "url": "Observation/123456789"},
        },
        {
            "fullUrl": "Procedure/45900",
            "resource": procedure.to_dict(),
            "request": {"method": "POST", "url": "Procedure/45900"},
        },
        {
            "fullUrl": "Observation/ST0001238",
            "resource": references[4].to_dict(),
            "request": {"method": "POST", "url": "Observation/ST0001238"},
        },
        {
            "fullUrl": "Reference/123456789",
            "resource": references[1].to_dict(),
            "request": {"method": "POST", "url": "Reference/123456789"},
        },
        {
            "fullUrl": "Reference/45900",
            "resource": references[2].to_dict(),
            "request": {"method": "POST", "url": "Reference/45900"},
        },
        {
            "fullUrl": "Reference/123456789",
            "resource": references[3].to_dict(),
            "request": {"method": "POST", "url": "Reference/123456789"},
        },
        {
            "fullUrl": "Reference/ST0001238",
            "resource": references[4].to_dict(),
            "request": {"method": "POST", "url": "Reference/ST0001238"},
        },
    ],
}
```
This is the final FHIR bundle that we will generate. Note that this bundle contains multiple entries, each representing a different FHIR resource (Patient, Condition, Procedure, Observation, Reference). Each entry has a full URL, a resource, and a request. The resource is the FHIR resource that we generated earlier, and the request is the HTTP request that we would send to create or update the resource. 
```python
print(bundle)
```
This will print the FHIR bundle to the console. 
```python
# Create Bundle
bundle = {
    "resourceType": "Bundle",
    "type": "transaction",
    "entry": [
        {
            "fullUrl": "Patient/22222244",
            "resource": patient.to_dict(),
            "request": {"method": "PUT", "url": "Patient/22222244"},
        },
        {
            "fullUrl": "